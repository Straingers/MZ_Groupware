<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ApprovalLineDetail-Mapper">

	<select id="selectLineDetailList" resultType="approvalLineDetail">
		SELECT 
			A.LINE_ID
		  ,	A.LINE_FIRST
          , (SELECT B.EMP_NAME FROM VIEW_EMP B WHERE A.LINE_FIRST = B.EMP_NO) FIRST_EMPNAME
          , (SELECT B.DEPT_NAME FROM VIEW_EMP B WHERE A.LINE_FIRST = B.EMP_NO) FIRST_DEPTNAME
          , (SELECT B.PS_NAME FROM VIEW_EMP B WHERE A.LINE_FIRST = B.EMP_NO) FIRST_PSNAME
		  , A.LINE_SECOND
          , (SELECT B.EMP_NAME FROM VIEW_EMP B WHERE A.LINE_SECOND = B.EMP_NO) SECOND_EMPNAME
          , (SELECT B.DEPT_NAME FROM VIEW_EMP B WHERE A.LINE_SECOND = B.EMP_NO) SECOND_DEPTNAME
          , (SELECT B.PS_NAME FROM VIEW_EMP B WHERE A.LINE_SECOND = B.EMP_NO) SECOND_PSNAME
		  , A.LINE_FINAL
          , (SELECT B.EMP_NAME FROM VIEW_EMP B WHERE A.LINE_FINAL = B.EMP_NO) FINAL_EMPNAME
          , (SELECT B.DEPT_NAME FROM VIEW_EMP B WHERE A.LINE_FINAL = B.EMP_NO) FINAL_DEPTNAME
          , (SELECT B.PS_NAME FROM VIEW_EMP B WHERE A.LINE_FINAL = B.EMP_NO) FINAL_PSNAME
		 FROM 
		 	APPROVAL_LINE_PERSONAL_DETAIL A
	</select>
	
	<select id="selectLineDetail" resultType="approvalLineDetail">
		SELECT 
			A.LINE_ID
		  ,	A.LINE_FIRST
          , (SELECT B.EMP_NAME FROM VIEW_EMP B WHERE A.LINE_FIRST = B.EMP_NO) FIRST_EMPNAME
          , (SELECT B.DEPT_NAME FROM VIEW_EMP B WHERE A.LINE_FIRST = B.EMP_NO) FIRST_DEPTNAME
          , (SELECT B.PS_NAME FROM VIEW_EMP B WHERE A.LINE_FIRST = B.EMP_NO) FIRST_PSNAME
		  , A.LINE_SECOND
          , (SELECT B.EMP_NAME FROM VIEW_EMP B WHERE A.LINE_SECOND = B.EMP_NO) SECOND_EMPNAME
          , (SELECT B.DEPT_NAME FROM VIEW_EMP B WHERE A.LINE_SECOND = B.EMP_NO) SECOND_DEPTNAME
          , (SELECT B.PS_NAME FROM VIEW_EMP B WHERE A.LINE_SECOND = B.EMP_NO) SECOND_PSNAME
		  , A.LINE_FINAL
          , (SELECT B.EMP_NAME FROM VIEW_EMP B WHERE A.LINE_FINAL = B.EMP_NO) FINAL_EMPNAME
          , (SELECT B.DEPT_NAME FROM VIEW_EMP B WHERE A.LINE_FINAL = B.EMP_NO) FINAL_DEPTNAME
          , (SELECT B.PS_NAME FROM VIEW_EMP B WHERE A.LINE_FINAL = B.EMP_NO) FINAL_PSNAME
		 FROM 
		 	APPROVAL_LINE_PERSONAL_DETAIL A
		 WHERE A.LINE_ID = #{lineId}
	</select>
	
	<insert id="insertLineDetail">
		INSERT INTO APPROVAL_LINE_PERSONAL_DETAIL (
			LINE_ID
		  , LINE_FIRST
		  , LINE_SECOND
		  , LINE_FINAL
		  , IS_DEL
		) VALUES (
			#{lineId}
		  , #{lineFirst, jdbcType=VARCHAR}
		  , #{lineSecond, jdbcType=VARCHAR}
		  , #{lineFinal, jdbcType=VARCHAR}
		  , 'N'
		)
	</insert>
	
	<update id="updateLineDetail">
	
	</update>
	
	<update id="deleteLineDetail">
			DELETE 
			FROM APPROVAL_LINE_PERSONAL_DETAIL 
			WHERE
				LINE_ID = #{lineId} 
	</update>
</mapper>